<div class="container">
    <app-sidebar-eleve></app-sidebar-eleve>            
    <div class="info">
        <div class="avis-container">
            <h2>Avis des élèves</h2>
            <button (click)="openAddAvisModal()">Laisser un avis</button>
          
            <!-- Liste des avis -->
            <div *ngFor="let avis of avisList" class="avis-card">
                <p><strong>{{ avis.nom }} {{ avis.prenom }}</strong></p>
                <p>{{ avis.commentaire }}</p>
                <p>Posté le : {{ avis.date_commentaire | date: 'dd/MM/yyyy HH:mm' }}</p>
                <!-- Boutons seulement pour l'élève propriétaire -->
                <div *ngIf="userId === avis.id_eleve" class="avis-actions">
                    <button (click)="openEditModal(avis)">Modifier</button>
                    <button (click)="deleteAvis(avis.id_avis)">Supprimer</button>
                </div>
            </div>
          
            <!-- Pop-up pour ajouter un avis -->
            <div *ngIf="showAddAvisModal" class="modal">
                <div class="modal-content">
                    <h3>Laisser un avis</h3>
                    <textarea [(ngModel)]="newAvis.commentaire" placeholder="Votre avis..."></textarea>
                    <div class="modal-buttons">
                        <button (click)="submitAvis()">Soumettre</button>
                        <button (click)="closeAddAvisModal()">Fermer</button>
                    </div>
                </div>
            </div>
          
            <!-- Pop-up pour modifier un avis -->
            <div *ngIf="showEditModal" class="modal">
                <div class="modal-content">
                    <h3>Modifier l'avis</h3>
                    <textarea [(ngModel)]="selectedAvis.commentaire"></textarea>
                    <div class="modal-buttons">
                        <button (click)="updateAvis()">Enregistrer</button>
                        <button (click)="closeEditModal()">Annuler</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>